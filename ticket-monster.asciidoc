TicketMonster walkthrough
=========================

Prerequisites
-------------

* Forge up and running
* JBDS
* OpenShift account

Persistence layer
-----------------

1. Open up `Booking.java`
   * Show basic structure
   * Point out generated id
   * Point out relationship to `tickets` and talk through `cascade` and `fetch`
2. Introduce Bean Validation
   * contstraint model (click through to `@NotEmpty`
   * `@Valid` for cascading constraints
   * `@Email` on `contactEmail`
3. Include basic business logic here - `getTotalTicketPrice()`
4. Boilerplate
5. Open up `Event.java`
   * Natural identifiers - unique columns
   * equals/hashCode


Business layer
--------------

1. Introduce `MediaItem` and `MediaManager`
   * Explain about caching

REST layer
----------

1. Open up `MediaService` - lightweight wrapper around `MediaManager` - explain why
2. Open up `BaseEntityService`
   * Standard logic for retrieving entities
   * Introduce criteria based query - typesafe etc.
   * automatic handling of items like maxResults and first
3. Open up `EventService`
   * Simple wrapper around BaseEntityService that adds some search predicates - mapping query parameters through to predicates
4. Open up `BookingService.java`
   * Work through algorithm - don't go into the details
   * Things to point out:
      * Automatic marshalling of JSON into holder objects
      * Population of entity from holder object (great for keeping your models clean)
      * BV constraints being applied


View layer
----------

Take a look at how events are rendered

1. Open up `src/main/webapp/desktop-index.html` 
2. At top of JS show backbone for model and events
3. TODO

Generate admin layer
--------------------

Now, we'll generate the admin layer. This is automatically generated by Forge. Currnetly using JSF, but we have prototpyed a POH5 version too.

1. Open up `admin_layer.fsh` in JBDS, walk through steps
2. _Show in -> Forge Console_
3. Run the script, this will deploy to openshift. Openup http://ticketmonster-pmuir.rhcloud.com and show CRUD UI added
